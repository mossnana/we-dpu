<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Welcome to Firebase Hosting</title>
    <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.yellow-light_green.min.css" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.8.3/firebase.js"></script>
</head>

<body>
<div class="mdl-layout mdl-js-layout">
    <header class="mdl-layout__header mdl-layout__header--scroll">
        <div class="mdl-layout__header-row">
            <!-- Title -->
            <span class="mdl-layout-title">ระบบสมาชิก</span>
        </div>
    </header>
    <div class="mdl-layout__drawer">
        <span class="mdl-layout-title">เมนู</span>
        <nav class="mdl-navigation">
            <a class="mdl-navigation__link" href="add.html">เพิ่ม</a>
        </nav>
    </div>
    <table class="mdl-data-table mdl-js-data-table mdl-shadow--2dp" style="width:40%;" id="ex-table">
        <thead>
        <tr>
            <th><a class="mdl-navigation__link" href="main.html"><i class="material-icons">keyboard_arrow_left</i>ย้อนกลับ</a></th>
            <th>Movie Detail</th>
        </tr>
        </thead>
        <tbody>
            <tr>
                <td>Photo</td>
                <td align="center"><img src="" alt="Photo" style="width:300px; height:auto;" id="photos"></td>
            </tr>
            <tr>
                <td>ID</td>
                <td align="center"><div id="showID"></div></td>
            </tr>
            <tr>
                <td>Title</td>
                <td align="center"><div id="title"></div></td>
            </tr>
            <tr>
                <td>Content</td>
                <td align="center"><div id="content"></div></td>
            </tr>
        </tbody>
    </table>
</div>
<script type="text/javascript">
    var config = {
      apiKey: "AIzaSyAp_BnfdAjiIi2RcTJuEf-0904Nsi8_eMs",
      authDomain: "android-tv-week6.firebaseapp.com",
      databaseURL: "https://android-tv-week6.firebaseio.com",
      projectId: "android-tv-week6",
      storageBucket: "android-tv-week6.appspot.com",
      messagingSenderId: "519077683796"
    };
    firebase.initializeApp(config);
    var database = firebase.database();
    var ref = firebase.database().ref("stream/channel");
    console.log(ref.key);
    var searchParams = new URLSearchParams(window.location.search);
    var ref = firebase.database().ref("stream/channel/" + searchParams.get("id"));
    ref.on("child_added", function (snapshot) {
        document.getElementById("showID").innerHTML = searchParams.get("id");
        if (snapshot.key === "photos") {
            console.log(snapshot.val());
            document.getElementById(snapshot.key).src = snapshot.val();
        } else {
            document.getElementById(snapshot.key).innerHTML = snapshot.val();
        }
    });
</script>
</body>

</html>
